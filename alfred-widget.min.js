!function(){"use strict";const e={serverUrl:"https://alfred-portfolio-bot.vercel.app",position:"bottom-right",theme:"dark",showPulse:!0,autoOpen:!1,tenantId:null},t=document.currentScript;if(t){const i=t.getAttribute("data-tenant-id");i&&(e.tenantId=i);const a=t.getAttribute("data-server-url");a&&(e.serverUrl=a);const n=t.getAttribute("data-position");n&&(e.position=n);const s=t.getAttribute("data-theme");s&&(e.theme=s)}const i=`\n        <div class="alfred-widget" id="alfredWidget">\n            <button class="alfred-widget-toggle" id="alfredToggle">\n                ${e.showPulse?'<div class="pulse"></div>':""}\n                <i class="fas fa-robot"></i>\n            </button>\n            \n            <div class="alfred-widget-overlay" id="alfredOverlay"></div>\n            \n            <div class="alfred-widget-panel" id="alfredPanel">\n                <div class="alfred-widget-header">\n                    <div class="alfred-widget-header-left">\n                        <div class="alfred-widget-avatar">\n                            <i class="fas fa-robot"></i>\n                        </div>\n                        <div>\n                            <h3 class="alfred-widget-title">JIA</h3>\n                            <p class="alfred-widget-subtitle">Jeeva's AI Assistant</p>\n                        </div>\n                    </div>\n                    <button class="alfred-widget-close" id="alfredClose">\n                        <i class="fas fa-times"></i>\n                    </button>\n                </div>\n                \n                <div class="alfred-widget-content">\n                    <div class="alfred-widget-greeting">\n                        <h3>Hello! ðŸ‘‹</h3>\n                        <p>I'm JIA, Jeeva's AI assistant. Ask me anything about his work, skills, or experience!</p>\n                    </div>\n                    \n                    <div class="alfred-widget-chat" id="alfredChat">\n                        <div class="alfred-widget-message alfred">\n                            <div class="alfred-widget-message-avatar">\n                                <i class="fas fa-robot"></i>\n                            </div>\n                            <div class="alfred-widget-message-bubble">\n                                Hi there! I'm JIA, Jeeva's personal AI assistant. I'm here to help you learn about his work, skills, and experience. How can I assist you today?\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class="alfred-widget-input-area">\n                        <div class="alfred-widget-input-wrapper">\n                            <textarea class="alfred-widget-input" id="alfredInput" placeholder="Ask JIA about Jeeva's work..." rows="1"></textarea>\n                            <button class="alfred-widget-send" id="alfredSend"><i class="fas fa-paper-plane"></i></button>\n                        </div>\n                        <div class="alfred-widget-suggestions">\n                            <div class="alfred-widget-suggestion" data-suggestion="What are Jeeva's main skills?">Skills</div>\n                            <div class="alfred-widget-suggestion" data-suggestion="Tell me about Jeeva's projects">Projects</div>\n                            <div class="alfred-widget-suggestion" data-suggestion="What is Jeeva's experience?">Experience</div>\n                            <div class="alfred-widget-suggestion" data-suggestion="How can I contact Jeeva?">Contact</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;class a{constructor(e){this.config=e,this.isOpen=!1,this.socket=null,this.sessionId=this.generateSessionId(),this.initializeWidget()}initializeWidget(){if(!document.getElementById("alfred-widget-styles")){const e=document.createElement("div");e.innerHTML="\n        <style id=\"alfred-widget-styles\">\n            /* JIA Bot Widget Styles */\n            .alfred-widget { position: fixed; bottom: 20px; right: 20px; z-index: 10000; font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }\n            .alfred-widget-toggle { width: 60px; height: 60px; background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%); border-radius: 50%; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; box-shadow: 0 4px 20px rgba(37, 99, 235, 0.4); transition: all 0.3s ease; position: relative; }\n            .alfred-widget-toggle:hover { transform: scale(1.1); box-shadow: 0 6px 25px rgba(37, 99, 235, 0.6); }\n            .alfred-widget-toggle.active { background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%); }\n            .alfred-widget-toggle .pulse { position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px; border-radius: 50%; background: rgba(37, 99, 235, 0.3); animation: alfred-pulse 2s infinite; }\n            @keyframes alfred-pulse { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(1.4); opacity: 0; } }\n            .alfred-widget-panel { position: fixed; top: 0; right: -400px; width: 400px; height: 100vh; background: #1e293b; color: white; transition: right 0.3s ease; z-index: 10001; display: flex; flex-direction: column; box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3); }\n            .alfred-widget-panel.open { right: 0; }\n            .alfred-widget-header { padding: 20px; background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%); display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid rgba(255,255,255,0.1); }\n            .alfred-widget-header-left { display: flex; align-items: center; gap: 12px; }\n            .alfred-widget-avatar { width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; backdrop-filter: blur(10px); border: 2px solid rgba(255,255,255,0.3); }\n            .alfred-widget-title { font-size: 18px; font-weight: 600; margin: 0; }\n            .alfred-widget-subtitle { font-size: 12px; opacity: 0.9; margin: 0; }\n            .alfred-widget-close { background: none; border: none; color: white; font-size: 20px; cursor: pointer; padding: 8px; border-radius: 4px; transition: background 0.2s ease; }\n            .alfred-widget-close:hover { background: rgba(255,255,255,0.1); }\n            .alfred-widget-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; }\n            .alfred-widget-greeting { padding: 20px; text-align: center; background: rgba(255,255,255,0.05); }\n            .alfred-widget-chat { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 16px; }\n            .alfred-widget-message { display: flex; gap: 12px; align-items: flex-start; }\n            .alfred-widget-message.user { flex-direction: row-reverse; }\n            .alfred-widget-message-avatar { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0; }\n            .alfred-widget-message.alfred .alfred-widget-message-avatar { background: linear-gradient(135deg, #2563eb, #3b82f6); color: white; }\n            .alfred-widget-message.user .alfred-widget-message-avatar { background: linear-gradient(135deg, #64748b, #475569); color: white; }\n            .alfred-widget-message-bubble { max-width: 80%; padding: 12px 16px; border-radius: 18px; font-size: 14px; line-height: 1.4; }\n            .alfred-widget-message.alfred .alfred-widget-message-bubble { background: rgba(255,255,255,0.1); color: white; }\n            .alfred-widget-message.user .alfred-widget-message-bubble { background: linear-gradient(135deg, #2563eb, #3b82f6); color: white; }\n            .alfred-widget-input-area { padding: 20px; background: rgba(255,255,255,0.05); border-top: 1px solid rgba(255,255,255,0.1); }\n            .alfred-widget-input-wrapper { display: flex; gap: 12px; align-items: flex-end; background: rgba(255,255,255,0.1); border-radius: 24px; padding: 12px; border: 1px solid rgba(255,255,255,0.2); }\n            .alfred-widget-input { flex: 1; background: none; border: none; outline: none; color: white; font-size: 14px; resize: none; min-height: 20px; max-height: 100px; font-family: inherit; }\n            .alfred-widget-input::placeholder { color: rgba(255,255,255,0.6); }\n            .alfred-widget-send { width: 36px; height: 36px; background: linear-gradient(135deg, #2563eb, #3b82f6); border: none; border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease; flex-shrink: 0; }\n            .alfred-widget-send:hover { transform: scale(1.1); }\n            .alfred-widget-suggestions { display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap; }\n            .alfred-widget-suggestion { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 6px 12px; border-radius: 16px; font-size: 12px; cursor: pointer; transition: all 0.2s ease; }\n            .alfred-widget-suggestion:hover { background: rgba(255,255,255,0.2); transform: translateY(-1px); }\n            .alfred-widget-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 10000; opacity: 0; visibility: hidden; transition: all 0.3s ease; }\n            .alfred-widget-overlay.open { opacity: 1; visibility: visible; }\n            @media (max-width: 768px) { .alfred-widget-panel { width: 100%; right: -100%; } .alfred-widget-toggle { width: 50px; height: 50px; font-size: 20px; bottom: 15px; right: 15px; } }\n            .alfred-widget-chat::-webkit-scrollbar { width: 4px; }\n            .alfred-widget-chat::-webkit-scrollbar-track { background: transparent; }\n            .alfred-widget-chat::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 2px; }\n            .alfred-widget-chat::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.5); }\n            /* Markdown styling */\n            .alfred-widget-message-bubble .markdown-body { color: inherit; }\n            .alfred-widget-message-bubble .markdown-body p { margin: 0.25rem 0; }\n            .alfred-widget-message-bubble .markdown-body ul, .alfred-widget-message-bubble .markdown-body ol { padding-left: 1.25rem; margin: 0.25rem 0; }\n            .alfred-widget-message-bubble .markdown-body ul { list-style: disc inside; }\n            .alfred-widget-message-bubble .markdown-body ol { list-style: decimal inside; }\n            .alfred-widget-message-bubble .markdown-body li { margin: 0.125rem 0; }\n            .alfred-widget-message-bubble .markdown-body a { color: inherit; text-decoration: underline; }\n            .alfred-widget-message-bubble pre { background: rgba(0,0,0,0.25); padding: 0.75rem; border-radius: 8px; overflow-x: auto; white-space: pre; -webkit-overflow-scrolling: touch; }\n            .alfred-widget-message.user .alfred-widget-message-bubble pre { background: rgba(255,255,255,0.15); }\n            .alfred-widget-message-bubble pre code { background: transparent; padding: 0; }\n            .alfred-widget-message-bubble code { background: rgba(255,255,255,0.15); padding: 0.15rem 0.35rem; border-radius: 4px; font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace; }\n            .alfred-widget-message.user .alfred-widget-message-bubble code { background: rgba(255,255,255,0.25); }\n        </style>\n    ",document.head.appendChild(e)}const e=document.createElement("div");e.innerHTML=i,document.body.appendChild(e.firstElementChild),this.initializeElements(),this.bindEvents(),this.initializeSocket(),this.configureMarkdown(),this.config.autoOpen&&setTimeout((()=>this.openPanel()),1e3)}initializeElements(){this.elements={widget:document.getElementById("alfredWidget"),toggle:document.getElementById("alfredToggle"),panel:document.getElementById("alfredPanel"),overlay:document.getElementById("alfredOverlay"),close:document.getElementById("alfredClose"),chat:document.getElementById("alfredChat"),input:document.getElementById("alfredInput"),send:document.getElementById("alfredSend")}}bindEvents(){this.elements.toggle.addEventListener("click",(()=>this.togglePanel())),this.elements.close.addEventListener("click",(()=>this.closePanel())),this.elements.overlay.addEventListener("click",(()=>this.closePanel())),this.elements.send.addEventListener("click",(()=>this.sendMessage())),this.elements.input.addEventListener("keydown",(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.sendMessage())})),this.elements.input.addEventListener("input",(()=>{this.autoResizeTextarea()})),document.addEventListener("click",(e=>{if(e.target.classList.contains("alfred-widget-suggestion")){const t=e.target.getAttribute("data-suggestion");this.elements.input.value=t,this.sendMessage()}}))}initializeSocket(){try{if("undefined"==typeof io){const e=document.createElement("script");e.src="https://cdn.socket.io/4.7.2/socket.io.min.js",e.onload=()=>this.connectSocket(),document.head.appendChild(e)}else this.connectSocket()}catch(e){console.error("Failed to initialize socket:",e)}}connectSocket(){try{this.socket=io(this.config.serverUrl),this.socket.on("alfred-response",(e=>{this.addMessage(e.message,"alfred")})),this.socket.on("alfred-error",(()=>{this.addMessage("Sorry, I encountered an error. Please try again.","alfred")})),this.socket.on("connect",(()=>{console.log("Connected to JIA server")})),this.socket.on("disconnect",(()=>{console.log("Disconnected from JIA server")}))}catch(e){console.error("Failed to connect to JIA server:",e)}}togglePanel(){this.isOpen?this.closePanel():this.openPanel()}openPanel(){this.isOpen=!0,this.elements.panel.classList.add("open"),this.elements.overlay.classList.add("open"),this.elements.toggle.classList.add("active"),this.elements.input.focus()}closePanel(){this.isOpen=!1,this.elements.panel.classList.remove("open"),this.elements.overlay.classList.remove("open"),this.elements.toggle.classList.remove("active")}sendMessage(){const e=this.elements.input.value.trim();e&&(this.addMessage(e,"user"),this.elements.input.value="",this.autoResizeTextarea(),this.socket?this.socket.emit("chat-message",{message:e,sessionId:this.sessionId}):setTimeout((()=>{this.addMessage("I apologize, but I'm currently unable to connect to the server. Please try again later.","alfred")}),1e3))}addMessage(e,t){const i=document.createElement("div");i.className=`alfred-widget-message ${t}`;const a="alfred"===t?"fas fa-robot":"fas fa-user";i.innerHTML=`\n                <div class="alfred-widget-message-avatar"><i class="${a}"></i></div>\n                <div class="alfred-widget-message-bubble"><div class="markdown-body">${this.formatMessage(e)}</div></div>\n            `,this.elements.chat.appendChild(i);try{if(window.hljs){i.querySelectorAll("pre code").forEach((e=>window.hljs.highlightElement(e)))}}catch(e){}this.scrollToBottom()}normalizeInlineLists(e){try{if(!e||"string"!=typeof e)return e;if(/(^|\n)\s*(?:[-*+]\s+|\d+\.[\t ]+)/.test(e))return e;let t=e.replace(/:\s*\*\s+/g,":\n- ");return t=t.replace(/\s\*\s+/g,"\n- "),t=t.replace(/\n{3,}/g,"\n\n"),t}catch(t){return e}}formatMessage(e){let t=e;try{const i=this.normalizeInlineLists(e);if(window.marked)t=window.marked.parse(i);else{const e=/(https?:\/\/[^\s]+)/g;t=i.replace(e,'<a href="$1" target="_blank" rel="noopener noreferrer nofollow">$1</a>')}}catch(e){}try{if(window.DOMPurify)return window.DOMPurify.sanitize(t,{USE_PROFILES:{html:!0},ADD_ATTR:["target","rel","class"],ALLOWED_TAGS:["a","p","br","span","div","strong","em","del","code","pre","blockquote","hr","ul","ol","li","h1","h2","h3","h4","h5","h6","table","thead","tbody","tr","th","td"]})}catch(e){}return t}configureMarkdown(){const e=e=>new Promise((t=>{if(Array.from(document.scripts).some((t=>t.src===e)))return t();const i=document.createElement("script");i.src=e,i.onload=t,i.onerror=t,document.head.appendChild(i)})),t=(e,t)=>{if(Array.from(document.querySelectorAll('link[rel="stylesheet"]')).some((t=>t.href===e)))return;const i=document.createElement("link");i.rel="stylesheet",i.href=e,t&&(i.media=t),document.head.appendChild(i)};t("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css","(prefers-color-scheme: light)"),t("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css","(prefers-color-scheme: dark)"),Promise.all([e("https://cdn.jsdelivr.net/npm/marked@12.0.2/marked.min.js"),e("https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"),e("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js")]).then((()=>{try{if(window.marked){window.marked.setOptions({gfm:!0,breaks:!0,headerIds:!0,mangle:!1,highlight:(e,t)=>window.hljs?t&&window.hljs.getLanguage(t)?window.hljs.highlight(e,{language:t}).value:window.hljs.highlightAuto(e).value:e});const e=new window.marked.Renderer;e.link=(e,t,i)=>`<a href="${e}"${t?` title="${t}"`:""} target="_blank" rel="noopener noreferrer nofollow">${i}</a>`,window.marked.use({renderer:e})}}catch(e){}}))}autoResizeTextarea(){const e=this.elements.input;e.style.height="auto",e.style.height=Math.min(e.scrollHeight,100)+"px"}scrollToBottom(){setTimeout((()=>{this.elements.chat.scrollTop=this.elements.chat.scrollHeight}),100)}generateSessionId(){return"widget_session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{window.alfredWidget=new a(e)})):window.alfredWidget=new a(e)}();