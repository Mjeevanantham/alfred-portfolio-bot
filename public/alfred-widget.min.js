!function(){"use strict";const e={serverUrl:"https://alfred-portfolio-bot.vercel.app",position:"bottom-right",theme:"dark",showPulse:!0,autoOpen:!1,tenantId:null},n=document.currentScript;if(n){const t=n.getAttribute("data-tenant-id");t&&(e.tenantId=t);const i=n.getAttribute("data-server-url");i&&(e.serverUrl=i);const a=n.getAttribute("data-position");a&&(e.position=a);const s=n.getAttribute("data-theme");s&&(e.theme=s)}const t=`\n        <div class="alfred-widget" id="alfredWidget">\n            <button class="alfred-widget-toggle" id="alfredToggle">\n                ${e.showPulse?'<div class="pulse"></div>':""}\n                <i class="fas fa-robot"></i>\n            </button>\n            \n            <div class="alfred-widget-overlay" id="alfredOverlay"></div>\n            \n            <div class="alfred-widget-panel" id="alfredPanel">\n                <div class="alfred-widget-header">\n                    <div class="alfred-widget-header-left">\n                        <div class="alfred-widget-avatar">\n                            <i class="fas fa-robot"></i>\n                        </div>\n                        <div>\n                            <h3 class="alfred-widget-title">JIA</h3>\n                            <p class="alfred-widget-subtitle">Jeeva's AI Assistant</p>\n                        </div>\n                    </div>\n                    <button class="alfred-widget-close" id="alfredClose">\n                        <i class="fas fa-times"></i>\n                    </button>\n                </div>\n                \n                <div class="alfred-widget-content">\n                    <div class="alfred-widget-greeting">\n                        <h3>Hello! ðŸ‘‹</h3>\n                        <p>I'm JIA, Jeeva's AI assistant. Ask me anything about his work, skills, or experience!</p>\n                    </div>\n                    \n                    <div class="alfred-widget-chat" id="alfredChat">\n                        <div class="alfred-widget-message alfred">\n                            <div class="alfred-widget-message-avatar">\n                                <i class="fas fa-robot"></i>\n                            </div>\n                            <div class="alfred-widget-message-bubble">\n                                Hi there! I'm JIA, Jeeva's personal AI assistant. I'm here to help you learn about his work, skills, and experience. How can I assist you today?\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class="alfred-widget-input-area">\n                        <div class="alfred-widget-input-wrapper">\n                            <textarea \n                                class="alfred-widget-input" \n                                id="alfredInput" \n                                placeholder="Ask JIA about Jeeva's work..."\n                                rows="1"\n                            ></textarea>\n                            <button class="alfred-widget-send" id="alfredSend">\n                                <i class="fas fa-paper-plane"></i>\n                            </button>\n                        </div>\n                        <div class="alfred-widget-suggestions">\n                            <div class="alfred-widget-suggestion" data-suggestion="What are Jeeva's main skills?">Skills</div>\n                            <div class="alfred-widget-suggestion" data-suggestion="Tell me about Jeeva's projects">Projects</div>\n                            <div class="alfred-widget-suggestion" data-suggestion="What is Jeeva's experience?">Experience</div>\n                            <div class="alfred-widget-suggestion" data-suggestion="How can I contact Jeeva?">Contact</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;class i{constructor(e){this.config=e,this.isOpen=!1,this.socket=null,this.sessionId=this.generateSessionId(),this.initializeWidget()}initializeWidget(){if(!document.getElementById("alfred-widget-styles")){const e=document.createElement("div");e.innerHTML="\n        <style id=\"alfred-widget-styles\">\n            /* JIA Bot Widget Styles */\n            .alfred-widget {\n                position: fixed;\n                bottom: 20px;\n                right: 20px;\n                z-index: 10000;\n                font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            }\n            \n            .alfred-widget-toggle {\n                width: 60px;\n                height: 60px;\n                background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);\n                border-radius: 50%;\n                border: none;\n                cursor: pointer;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                color: white;\n                font-size: 24px;\n                box-shadow: 0 4px 20px rgba(37, 99, 235, 0.4);\n                transition: all 0.3s ease;\n                position: relative;\n            }\n            \n            .alfred-widget-toggle:hover {\n                transform: scale(1.1);\n                box-shadow: 0 6px 25px rgba(37, 99, 235, 0.6);\n            }\n            \n            .alfred-widget-toggle.active {\n                background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);\n            }\n            \n            .alfred-widget-toggle .pulse {\n                position: absolute;\n                top: -2px;\n                left: -2px;\n                right: -2px;\n                bottom: -2px;\n                border-radius: 50%;\n                background: rgba(37, 99, 235, 0.3);\n                animation: alfred-pulse 2s infinite;\n            }\n            \n            @keyframes alfred-pulse {\n                0% {\n                    transform: scale(1);\n                    opacity: 1;\n                }\n                100% {\n                    transform: scale(1.4);\n                    opacity: 0;\n                }\n            }\n            \n            .alfred-widget-panel {\n                position: fixed;\n                top: 0;\n                right: -400px;\n                width: 400px;\n                height: 100vh;\n                background: #1e293b;\n                color: white;\n                transition: right 0.3s ease;\n                z-index: 10001;\n                display: flex;\n                flex-direction: column;\n                box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);\n            }\n            \n            .alfred-widget-panel.open {\n                right: 0;\n            }\n            \n            .alfred-widget-header {\n                padding: 20px;\n                background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n            }\n            \n            .alfred-widget-header-left {\n                display: flex;\n                align-items: center;\n                gap: 12px;\n            }\n            \n            .alfred-widget-avatar {\n                width: 40px;\n                height: 40px;\n                background: rgba(255, 255, 255, 0.2);\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 18px;\n                backdrop-filter: blur(10px);\n                border: 2px solid rgba(255, 255, 255, 0.3);\n            }\n            \n            .alfred-widget-title {\n                font-size: 18px;\n                font-weight: 600;\n                margin: 0;\n            }\n            \n            .alfred-widget-subtitle {\n                font-size: 12px;\n                opacity: 0.9;\n                margin: 0;\n            }\n            \n            .alfred-widget-close {\n                background: none;\n                border: none;\n                color: white;\n                font-size: 20px;\n                cursor: pointer;\n                padding: 8px;\n                border-radius: 4px;\n                transition: background 0.2s ease;\n            }\n            \n            .alfred-widget-close:hover {\n                background: rgba(255, 255, 255, 0.1);\n            }\n            \n            .alfred-widget-content {\n                flex: 1;\n                display: flex;\n                flex-direction: column;\n                overflow: hidden;\n            }\n            \n            .alfred-widget-greeting {\n                padding: 20px;\n                text-align: center;\n                background: rgba(255, 255, 255, 0.05);\n            }\n            \n            .alfred-widget-greeting h3 {\n                font-size: 20px;\n                margin: 0 0 8px 0;\n                font-weight: 600;\n            }\n            \n            .alfred-widget-greeting p {\n                font-size: 14px;\n                opacity: 0.8;\n                margin: 0;\n            }\n            \n            .alfred-widget-chat {\n                flex: 1;\n                padding: 20px;\n                overflow-y: auto;\n                display: flex;\n                flex-direction: column;\n                gap: 16px;\n            }\n            \n            .alfred-widget-message {\n                display: flex;\n                gap: 12px;\n                align-items: flex-start;\n            }\n            \n            .alfred-widget-message.user {\n                flex-direction: row-reverse;\n            }\n            \n            .alfred-widget-message-avatar {\n                width: 32px;\n                height: 32px;\n                border-radius: 50%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 14px;\n                flex-shrink: 0;\n            }\n            \n            .alfred-widget-message.alfred .alfred-widget-message-avatar {\n                background: linear-gradient(135deg, #2563eb, #3b82f6);\n                color: white;\n            }\n            \n            .alfred-widget-message.user .alfred-widget-message-avatar {\n                background: linear-gradient(135deg, #64748b, #475569);\n                color: white;\n            }\n            \n            .alfred-widget-message-bubble {\n                max-width: 80%;\n                padding: 12px 16px;\n                border-radius: 18px;\n                font-size: 14px;\n                line-height: 1.4;\n            }\n            \n            .alfred-widget-message.alfred .alfred-widget-message-bubble {\n                background: rgba(255, 255, 255, 0.1);\n                color: white;\n            }\n            \n            .alfred-widget-message.user .alfred-widget-message-bubble {\n                background: linear-gradient(135deg, #2563eb, #3b82f6);\n                color: white;\n            }\n            \n            .alfred-widget-input-area {\n                padding: 20px;\n                background: rgba(255, 255, 255, 0.05);\n                border-top: 1px solid rgba(255, 255, 255, 0.1);\n            }\n            \n            .alfred-widget-input-wrapper {\n                display: flex;\n                gap: 12px;\n                align-items: flex-end;\n                background: rgba(255, 255, 255, 0.1);\n                border-radius: 24px;\n                padding: 12px;\n                border: 1px solid rgba(255, 255, 255, 0.2);\n            }\n            \n            .alfred-widget-input {\n                flex: 1;\n                background: none;\n                border: none;\n                outline: none;\n                color: white;\n                font-size: 16px; /* prevent iOS zoom */\n                resize: none;\n                min-height: 20px;\n                max-height: 100px;\n                font-family: inherit;\n            }\n            \n            .alfred-widget-input::placeholder {\n                color: rgba(255, 255, 255, 0.6);\n            }\n            \n            .alfred-widget-send {\n                width: 36px;\n                height: 36px;\n                background: linear-gradient(135deg, #2563eb, #3b82f6);\n                border: none;\n                border-radius: 50%;\n                color: white;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                flex-shrink: 0;\n            }\n            \n            .alfred-widget-send:hover {\n                transform: scale(1.1);\n            }\n            \n            .alfred-widget-suggestions {\n                display: flex;\n                gap: 8px;\n                margin-top: 12px;\n                flex-wrap: wrap;\n            }\n            \n            .alfred-widget-suggestion {\n                background: rgba(255, 255, 255, 0.1);\n                border: 1px solid rgba(255, 255, 255, 0.2);\n                color: white;\n                padding: 6px 12px;\n                border-radius: 16px;\n                font-size: 12px;\n                cursor: pointer;\n                transition: all 0.2s ease;\n            }\n            \n            .alfred-widget-suggestion:hover {\n                background: rgba(255, 255, 255, 0.2);\n                transform: translateY(-1px);\n            }\n            \n            .alfred-widget-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background: rgba(0, 0, 0, 0.5);\n                z-index: 10000;\n                opacity: 0;\n                visibility: hidden;\n                transition: all 0.3s ease;\n            }\n            \n            .alfred-widget-overlay.open {\n                opacity: 1;\n                visibility: visible;\n            }\n            \n            /* Mobile Responsive */\n            @media (max-width: 768px) {\n                .alfred-widget-panel {\n                    width: 100%;\n                    right: -100%;\n                }\n                \n                .alfred-widget-toggle {\n                    width: 50px;\n                    height: 50px;\n                    font-size: 20px;\n                    bottom: 15px;\n                    right: 15px;\n                }\n            }\n            \n            /* Scrollbar Styling */\n            .alfred-widget-chat::-webkit-scrollbar {\n                width: 4px;\n            }\n            \n            .alfred-widget-chat::-webkit-scrollbar-track {\n                background: transparent;\n            }\n            \n            .alfred-widget-chat::-webkit-scrollbar-thumb {\n                background: rgba(255, 255, 255, 0.3);\n                border-radius: 2px;\n            }\n            \n            .alfred-widget-chat::-webkit-scrollbar-thumb:hover {\n                background: rgba(255, 255, 255, 0.5);\n            }\n\n            /* Markdown rendering inside bubbles */\n            .alfred-widget-message-bubble .markdown-body { color: inherit; }\n            .alfred-widget-message-bubble .markdown-body p { margin: 0.25rem 0; }\n            .alfred-widget-message-bubble .markdown-body ul,\n            .alfred-widget-message-bubble .markdown-body ol { padding-left: 1.25rem; margin: 0.25rem 0; }\n            .alfred-widget-message-bubble .markdown-body ul { list-style: disc inside; }\n            .alfred-widget-message-bubble .markdown-body ol { list-style: decimal inside; }\n            .alfred-widget-message-bubble .markdown-body li { margin: 0.125rem 0; }\n            .alfred-widget-message-bubble .markdown-body ul { list-style: disc inside; }\n            .alfred-widget-message-bubble .markdown-body ol { list-style: decimal inside; }\n            .alfred-widget-message-bubble .markdown-body a { color: inherit; text-decoration: underline; }\n            .alfred-widget-message-bubble pre {\n                background: rgba(0,0,0,0.25);\n                padding: 0.75rem;\n                border-radius: 8px;\n                overflow-x: auto;\n                white-space: pre;\n                -webkit-overflow-scrolling: touch;\n            }\n            .alfred-widget-message.user .alfred-widget-message-bubble pre { background: rgba(255,255,255,0.15); }\n            .alfred-widget-message-bubble pre code { background: transparent; padding: 0; }\n            .alfred-widget-message-bubble code {\n                background: rgba(255,255,255,0.15);\n                padding: 0.15rem 0.35rem;\n                border-radius: 4px;\n                font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;\n            }\n            .alfred-widget-message.user .alfred-widget-message-bubble code { background: rgba(255,255,255,0.25); }\n        </style>\n    ",document.head.appendChild(e)}const e=document.createElement("div");e.innerHTML=t,document.body.appendChild(e.firstElementChild),this.initializeElements(),this.bindEvents(),this.initializeSocket(),this.configureMarkdown(),this.config.autoOpen&&setTimeout((()=>this.openPanel()),1e3)}initializeElements(){this.elements={widget:document.getElementById("alfredWidget"),toggle:document.getElementById("alfredToggle"),panel:document.getElementById("alfredPanel"),overlay:document.getElementById("alfredOverlay"),close:document.getElementById("alfredClose"),chat:document.getElementById("alfredChat"),input:document.getElementById("alfredInput"),send:document.getElementById("alfredSend")}}bindEvents(){this.elements.toggle.addEventListener("click",(()=>this.togglePanel())),this.elements.close.addEventListener("click",(()=>this.closePanel())),this.elements.overlay.addEventListener("click",(()=>this.closePanel())),this.elements.send.addEventListener("click",(()=>this.sendMessage())),this.elements.input.addEventListener("keydown",(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.sendMessage())})),this.elements.input.addEventListener("input",(()=>{this.autoResizeTextarea()})),document.addEventListener("click",(e=>{if(e.target.classList.contains("alfred-widget-suggestion")){const n=e.target.getAttribute("data-suggestion");this.elements.input.value=n,this.sendMessage()}}))}initializeSocket(){try{if("undefined"==typeof io){const e=document.createElement("script");e.src="https://cdn.socket.io/4.7.2/socket.io.min.js",e.onload=()=>this.connectSocket(),e.onerror=()=>{console.error("Failed to load Socket.IO from CDN"),this.showFallbackMessage()},document.head.appendChild(e)}else this.connectSocket()}catch(e){console.error("Failed to initialize socket:",e),this.showFallbackMessage()}}showFallbackMessage(){setTimeout((()=>{this.addMessage("I'm currently in offline mode. Please refresh the page to try again.","alfred")}),1e3)}connectSocket(){try{this.socket=io(this.config.serverUrl),this.socket.on("alfred-response",(e=>{this.addMessage(e.message,"alfred")})),this.socket.on("alfred-error",(()=>{this.addMessage("Sorry, I encountered an error. Please try again.","alfred")})),this.socket.on("connect",(()=>{console.log("Connected to JIA server")})),this.socket.on("disconnect",(()=>{console.log("Disconnected from JIA server")}))}catch(e){console.error("Failed to connect to JIA server:",e)}}togglePanel(){this.isOpen?this.closePanel():this.openPanel()}openPanel(){this.isOpen=!0,this.elements.panel.classList.add("open"),this.elements.overlay.classList.add("open"),this.elements.toggle.classList.add("active"),this.elements.input.focus()}closePanel(){this.isOpen=!1,this.elements.panel.classList.remove("open"),this.elements.overlay.classList.remove("open"),this.elements.toggle.classList.remove("active")}sendMessage(){const e=this.elements.input.value.trim();e&&(this.addMessage(e,"user"),this.elements.input.value="",this.autoResizeTextarea(),this.socket?this.socket.emit("chat-message",{message:e,sessionId:this.sessionId}):setTimeout((()=>{this.addMessage("I apologize, but I'm currently unable to connect to the server. Please try again later.","alfred")}),1e3))}addMessage(e,n){const t=document.createElement("div");t.className=`alfred-widget-message ${n}`;const i="alfred"===n?"fas fa-robot":"fas fa-user";t.innerHTML=`\n                <div class="alfred-widget-message-avatar">\n                    <i class="${i}"></i>\n                </div>\n                <div class="alfred-widget-message-bubble">\n                    <div class="markdown-body">${this.formatMessage(e)}</div>\n                </div>\n            `,this.elements.chat.appendChild(t);try{if(window.hljs){t.querySelectorAll("pre code").forEach((e=>window.hljs.highlightElement(e)))}}catch(e){}this.scrollToBottom()}normalizeInlineLists(e){try{if(!e||"string"!=typeof e)return e;if(/(^|\n)\s*(?:[-*+]\s+|\d+\.[\t ]+)/.test(e))return e;let n=e.replace(/:\s*\*\s+/g,":\n- ");return n=n.replace(/\s\*\s+/g,"\n- "),n=n.replace(/\n{3,}/g,"\n\n"),n}catch(n){return e}}formatMessage(e){let n=e;try{const t=this.normalizeInlineLists(e);if(window.marked)n=window.marked.parse(t);else{const e=/(https?:\/\/[^\s]+)/g;n=t.replace(e,'<a href="$1" target="_blank" rel="noopener noreferrer nofollow">$1</a>')}}catch(e){}try{if(window.DOMPurify)return window.DOMPurify.sanitize(n,{USE_PROFILES:{html:!0},ADD_ATTR:["target","rel","class"],ALLOWED_TAGS:["a","p","br","span","div","strong","em","del","code","pre","blockquote","hr","ul","ol","li","h1","h2","h3","h4","h5","h6","table","thead","tbody","tr","th","td"]})}catch(e){}return n}configureMarkdown(){const e=e=>new Promise((n=>{if(Array.from(document.scripts).some((n=>n.src===e)))return n();const t=document.createElement("script");t.src=e,t.onload=n,t.onerror=n,document.head.appendChild(t)})),n=(e,n)=>{if(Array.from(document.querySelectorAll('link[rel="stylesheet"]')).some((n=>n.href===e)))return;const t=document.createElement("link");t.rel="stylesheet",t.href=e,n&&(t.media=n),document.head.appendChild(t)};n("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css","(prefers-color-scheme: light)"),n("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css","(prefers-color-scheme: dark)"),Promise.all([e("https://cdn.jsdelivr.net/npm/marked@12.0.2/marked.min.js"),e("https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"),e("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js")]).then((()=>{try{if(window.marked){window.marked.setOptions({gfm:!0,breaks:!0,headerIds:!0,mangle:!1,highlight:(e,n)=>window.hljs?n&&window.hljs.getLanguage(n)?window.hljs.highlight(e,{language:n}).value:window.hljs.highlightAuto(e).value:e});const e=new window.marked.Renderer;e.link=(e,n,t)=>`<a href="${e}"${n?` title="${n}"`:""} target="_blank" rel="noopener noreferrer nofollow">${t}</a>`,window.marked.use({renderer:e})}}catch(e){}}))}autoResizeTextarea(){const e=this.elements.input;e.style.height="auto",e.style.height=Math.min(e.scrollHeight,100)+"px"}scrollToBottom(){setTimeout((()=>{this.elements.chat.scrollTop=this.elements.chat.scrollHeight}),100)}generateSessionId(){return"widget_session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{window.alfredWidget=new i(e)})):window.alfredWidget=new i(e)}();